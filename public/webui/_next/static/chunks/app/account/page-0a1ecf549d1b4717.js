(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{1798:()=>{},4507:()=>{},8392:(e,r,t)=>{Promise.resolve().then(t.bind(t,5440))},8250:(e,r,t)=>{"use strict";t.d(r,{Hu:()=>a,WH:()=>i,Sj:()=>o,q0:()=>n,MO:()=>h,Bx:()=>f,Sx:()=>u});let a=null!==(d=null===(s=t.g.process)||void 0===s?void 0:s.env.CHAIN_TYPE)&&void 0!==d?d:"testnet";null===(l=t.g.process)||void 0===l||l.env.FNN_ENDPOINT,null===(c=t.g.process)||void 0===c||c.env.CKB_NODE_ENDPOINT;let n="mainnet"===a?"https://explorer.nervos.org":"https://testnet.explorer.nervos.org";var s,l,c,d,i=function(e){return e.NegotiatingFunding="NEGOTIATING_FUNDING",e.CollaboratingFundingTx="COLLABORATING_FUNDING_TX",e.SigningCommitment="SIGNING_COMMITMENT",e.AwaitingTxSignatures="AWAITING_TX_SIGNATURES",e.AwaitingChannelReady="AWAITING_CHANNEL_READY",e.ChannelReady="CHANNEL_READY",e.ShuttingDown="SHUTTING_DOWN",e.Closed="CLOSED",e}({}),o=function(e){return e.Fibb="Fibb",e.Fibt="Fibt",e.Fibd="Fibd",e}({}),u=function(e){return e.Open="Open",e.Cancelled="Cancelled",e.Expired="Expired",e.Received="Received",e.Paid="Paid",e.BeingCancelled="BeingCancelled",e.Archived="Archived",e}({}),h=function(e){return e.Account="Account",e.Peer="Peer",e.Channel="Channel",e.Merchant="Merchant",e.Invoice="Order",e}({}),f=function(e){return e.New="New",e.Delete="Delete",e.Update="Update",e.Archive="Archive",e.Cancel="Cancel",e}({})},5440:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>T});var a=t(3528),n=t(5547),s=t(9821),l=t(9992),c=t(736),d=t(8569),i=t(2920),o=t(9174),u=t(8250),h=t(5613),f=t(4887),m=t(6775),x=t(4187),p=t(7083),N=t(7369),j=t(8122);let b=e=>{let{address:r}=e;if(!r)return(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(j.E,{className:"mt-2 h-20 "})});let t=()=>{window.navigator.clipboard.writeText(r).then(()=>(0,x.oR)({description:"Copied"}))};return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"font-semibold text-md",children:"Address"}),(0,a.jsx)("pre",{className:"rounded-md bg-slate-950 p-4 text-wrap break-all",children:(0,a.jsx)("code",{className:"text-white",children:r})}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(p.$,{disabled:!0,variant:"outline",onClick:t,children:(0,a.jsx)(h.A,{})}),(0,a.jsx)(p.$,{variant:"outline",onClick:t,children:(0,a.jsx)(f.A,{})}),(0,a.jsx)(N.default,{href:"".concat(u.q0,"/address/").concat(r),target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(p.$,{variant:"outline",children:(0,a.jsx)(m.A,{})})})]})]})};var v=t(2457),g=t(5064);let y=()=>{let{data:e,isLoading:r}=(0,n.I)({queryKey:["info"],queryFn:o.Nn,refetchInterval:g.a,refetchOnWindowFocus:!0});if(r||!e)return Array.from({length:10}).map((e,r)=>(0,a.jsx)(j.E,{className:"w-full h-5 mt-2"},r));let{CKB:t,...s}=e.result.local_balance,l=Object.entries(s).map(e=>{var r;let[t,a]=e;return{id:t,name:null===(r=a.udt_info)||void 0===r?void 0:r.name,balance:a.balance}});return l.unshift({id:"CKB",name:"CKB",balance:t.balance}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-md",children:"Local Balance"}),(0,a.jsxs)(v.XI,{children:[(0,a.jsx)(v.A0,{children:(0,a.jsxs)(v.Hj,{children:[(0,a.jsx)(v.nd,{className:"w-[100px]",children:"Token"}),(0,a.jsx)(v.nd,{className:"text-right",children:"Balance"})]})}),(0,a.jsx)(v.BF,{children:l.map(e=>(0,a.jsxs)(v.Hj,{children:[(0,a.jsx)(v.nA,{className:"font-medium",children:e.name}),(0,a.jsx)(v.nA,{className:"text-right",children:BigInt(e.balance).toLocaleString("en")})]},e.id))})]})]})};var w=t(3790);let A=()=>{let{data:e,isLoading:r}=(0,n.I)({queryKey:["channels"],queryFn:w.$Q,refetchInterval:g.a,refetchOnWindowFocus:!0}),{data:t}=(0,n.I)({queryKey:["info"],queryFn:o.Nn,refetchInterval:g.a,refetchOnWindowFocus:!0});return r||!e?Array.from({length:10}).map((e,r)=>(0,a.jsx)(j.E,{className:"w-full h-5 mt-2"},r)):(0,a.jsxs)(v.XI,{children:[(0,a.jsx)(v.A0,{children:(0,a.jsxs)(v.Hj,{children:[(0,a.jsx)(v.nd,{children:"Channel ID"}),(0,a.jsx)(v.nd,{children:"Percentage"}),(0,a.jsx)(v.nd,{className:"text-right",children:"Local Balance"})]})}),(0,a.jsx)(v.BF,{children:e.result.filter(e=>+e.local_balance).map(e=>{var r,n,s,l;let c=e.funding_udt_type_script_hash?null===(r=e.udt)||void 0===r?void 0:r.name:"CKB",d="".concat(BigInt(e.local_balance).toLocaleString("en")," ").concat(c),i=null!==(l=null==t?void 0:null===(n=t.result.local_balance[null!==(s=e.funding_udt_type_script_hash)&&void 0!==s?s:"CKB"])||void 0===n?void 0:n.balance)&&void 0!==l?l:"",o=+i?(100*+e.local_balance/+i).toFixed(2):null;return(0,a.jsxs)(v.Hj,{children:[(0,a.jsx)(v.nA,{className:"font-medium overflow-hidden overflow-ellipsis font-mono",title:e.channel_id,children:e.channel_id}),(0,a.jsx)(v.nA,{children:"".concat(null!=o?o:"-","% of ").concat(c)}),(0,a.jsx)(v.nA,{className:"text-right",children:d})]},e.channel_id)})})]})};function T(){var e;let{data:r}=(0,n.I)({queryKey:["admin"],queryFn:o.KJ}),t=null==r?void 0:null===(e=r.result)||void 0===e?void 0:e.script,h=t?(0,s.pu)({codeHash:t.code_hash,hashType:t.hash_type,args:t.args},"mainnet"===u.Hu):null;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,a.jsx)(l.x2,{className:"ml-1"}),(0,a.jsx)(c.Qp,{children:(0,a.jsxs)(c.AB,{children:[(0,a.jsx)(c.J5,{className:"hidden md:block",children:(0,a.jsx)(c.tJ,{children:"Dashboard"})}),(0,a.jsx)(c.tH,{className:"hidden md:block"}),(0,a.jsx)(c.J5,{children:(0,a.jsx)(c.tJ,{children:"Account"})})]})})]}),(0,a.jsx)("main",{className:"flex flex-col gap-8 items-center p-10",children:(0,a.jsxs)("div",{className:"w-full flex flex-col gap-8",children:[(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{children:"Admin"}),(0,a.jsx)(d.BT,{children:"Admin info"})]}),(0,a.jsxs)(d.Wu,{children:[(0,a.jsx)(b,{address:h}),(0,a.jsx)(i.w,{className:"my-4"}),(0,a.jsx)(y,{})]})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{children:"Balance Distribution"}),(0,a.jsx)(d.BT,{children:"Balance distributed in channels"})]}),(0,a.jsx)(d.Wu,{children:(0,a.jsx)(A,{})})]})]})})]})}},3790:(e,r,t)=>{"use strict";t.d(r,{$Q:()=>n,ay:()=>l,w0:()=>s});var a=t(5064);let n=async()=>fetch("".concat(a.C,"/channels")).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),s=async(e,r)=>fetch("".concat(a.C,"/channels/").concat(e),{method:"DELETE",body:JSON.stringify({fee_rate:r})}).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),l=async(e,r)=>fetch("".concat(a.C,"/channels"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({peer_id:e,funding_amount:"0x".concat(r.toString(16))})}).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e})},9174:(e,r,t)=>{"use strict";t.d(r,{KJ:()=>s,Nn:()=>n,Xc:()=>l,oq:()=>c});var a=t(5064);let n=async()=>fetch("".concat(a.C,"/info")).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),s=async()=>fetch("".concat(a.C,"/info/admin")).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),l=async()=>fetch("".concat(a.C,"/info/finance")).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),c=async()=>fetch("".concat(a.C,"/info/udt-info")).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e})},5064:(e,r,t)=>{"use strict";t.d(r,{C:()=>a,a:()=>n});let a="http://localhost:3000/api",n=1e4},736:(e,r,t)=>{"use strict";t.d(r,{AB:()=>i,J5:()=>o,Qp:()=>d,tH:()=>h,tJ:()=>u});var a=t(3528),n=t(5316),s=t(2635),l=t(9070),c=(t(4769),t(6856));let d=n.forwardRef((e,r)=>{let{...t}=e;return(0,a.jsx)("nav",{ref:r,"aria-label":"breadcrumb",...t})});d.displayName="Breadcrumb";let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("ol",{ref:r,className:(0,c.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",t),...n})});i.displayName="BreadcrumbList";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("li",{ref:r,className:(0,c.cn)("inline-flex items-center gap-1.5",t),...n})});o.displayName="BreadcrumbItem",n.forwardRef((e,r)=>{let{asChild:t,className:n,...l}=e,d=t?s.DX:"a";return(0,a.jsx)(d,{ref:r,className:(0,c.cn)("transition-colors hover:text-foreground",n),...l})}).displayName="BreadcrumbLink";let u=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:(0,c.cn)("font-normal text-foreground",t),...n})});u.displayName="BreadcrumbPage";let h=e=>{let{children:r,className:t,...n}=e;return(0,a.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,c.cn)("[&>svg]:w-3.5 [&>svg]:h-3.5",t),...n,children:null!=r?r:(0,a.jsx)(l.A,{})})};h.displayName="BreadcrumbSeparator"},8569:(e,r,t)=>{"use strict";t.d(r,{BT:()=>i,Wu:()=>o,ZB:()=>d,Zp:()=>l,aR:()=>c});var a=t(3528),n=t(5316),s=t(6856);let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...n})});l.displayName="Card";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...n})});c.displayName="CardHeader";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("font-semibold leading-none tracking-tight",t),...n})});d.displayName="CardTitle";let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...n})});i.displayName="CardDescription";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...n})});o.displayName="CardContent",n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},2457:(e,r,t)=>{"use strict";t.d(r,{A0:()=>c,BF:()=>d,Hj:()=>i,XI:()=>l,nA:()=>u,nd:()=>o,r6:()=>h});var a=t(3528),n=t(5316),s=t(6856);let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,s.cn)("w-full caption-bottom text-sm",t),...n})})});l.displayName="Table";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("thead",{ref:r,className:(0,s.cn)("[&_tr]:border-b",t),...n})});c.displayName="TableHeader";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("tbody",{ref:r,className:(0,s.cn)("[&_tr:last-child]:border-0",t),...n})});d.displayName="TableBody",n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("tfoot",{ref:r,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n})}).displayName="TableFooter";let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("tr",{ref:r,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n})});i.displayName="TableRow";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("th",{ref:r,className:(0,s.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n})});o.displayName="TableHead";let u=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("td",{ref:r,className:(0,s.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n})});u.displayName="TableCell";let h=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("caption",{ref:r,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",t),...n})});h.displayName="TableCaption"},4187:(e,r,t)=>{"use strict";t.d(r,{dj:()=>h,oR:()=>u});var a=t(5316);let n=0,s=new Map,l=e=>{if(s.has(e))return;let r=setTimeout(()=>{s.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,r)},c=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},d=[],i={toasts:[]};function o(e){i=c(i,e),d.forEach(e=>{e(i)})}function u(e){let{...r}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function h(){let[e,r]=a.useState(i);return a.useEffect(()=>(d.push(r),()=>{let e=d.indexOf(r);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var r=r=>e(e.s=r);e.O(0,[878,356,928,801,145,992,465,743,358],()=>r(8392)),_N_E=e.O()}]);