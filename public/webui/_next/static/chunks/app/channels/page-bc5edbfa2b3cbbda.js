(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[691],{8967:(e,t,a)=>{Promise.resolve().then(a.bind(a,171))},8250:(e,t,a)=>{"use strict";a.d(t,{Hu:()=>r,Lc:()=>n,WH:()=>c,Sj:()=>m,q0:()=>s,MO:()=>f,Bx:()=>p,Sx:()=>u});let r=null!==(o=null===(l=a.g.process)||void 0===l?void 0:l.env.CHAIN_TYPE)&&void 0!==o?o:"testnet";null===(i=a.g.process)||void 0===i||i.env.FNN_ENDPOINT,null===(d=a.g.process)||void 0===d||d.env.CKB_NODE_ENDPOINT;let s="mainnet"===r?"https://explorer.nervos.org":"https://testnet.explorer.nervos.org",n=8;var l,i,d,o,c=function(e){return e.NegotiatingFunding="NEGOTIATING_FUNDING",e.CollaboratingFundingTx="COLLABORATING_FUNDING_TX",e.SigningCommitment="SIGNING_COMMITMENT",e.AwaitingTxSignatures="AWAITING_TX_SIGNATURES",e.AwaitingChannelReady="AWAITING_CHANNEL_READY",e.ChannelReady="CHANNEL_READY",e.ShuttingDown="SHUTTING_DOWN",e.Closed="CLOSED",e}({}),m=function(e){return e.Fibb="Fibb",e.Fibt="Fibt",e.Fibd="Fibd",e}({}),u=function(e){return e.Open="Open",e.Cancelled="Cancelled",e.Expired="Expired",e.Received="Received",e.Paid="Paid",e.BeingCancelled="BeingCancelled",e.Archived="Archived",e}({}),f=function(e){return e.Account="Account",e.Peer="Peer",e.Channel="Channel",e.Merchant="Merchant",e.Invoice="Order",e}({}),p=function(e){return e.New="New",e.Delete="Delete",e.Update="Update",e.Archive="Archive",e.Cancel="Cancel",e}({})},171:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var r=a(3528),s=a(9992),n=a(736),l=a(5547),i=a(3790),d=a(5064),o=a(2457),c=a(8122),m=a(4187),u=a(2740),f=a(7083),p=a(8250);let h=e=>{let{peerId:t,channelId:a,state:s}=e,{refetch:n}=(0,l.I)({queryKey:["channels"],queryFn:i.$Q,enabled:!1}),d=async()=>{try{await (0,i.w0)(a,1e3),(0,m.oR)({title:"Close signal sent"}),setTimeout(()=>{n()},500)}catch(e){e instanceof Error&&(0,m.oR)({title:"Fail to close channel",description:e.message})}},o=e=>{e.stopPropagation(),e.preventDefault();let t=e.target;if(!(t instanceof HTMLDivElement))return;let{id:a}=t.dataset;a&&window.navigator.clipboard.writeText(a).then(()=>{(0,m.oR)({description:"Copied"})})};return(0,r.jsxs)(u.rI,{children:[(0,r.jsx)(u.ty,{children:"Action"}),(0,r.jsxs)(u.SQ,{children:[(0,r.jsx)(u.lp,{children:"Share"}),(0,r.jsx)(u.mB,{}),(0,r.jsx)(u._2,{onClick:o,"data-id":a,children:"Copy Channel ID"}),(0,r.jsx)(u._2,{onClick:o,"data-id":t,children:"Copy Peer ID"}),s===p.WH.ChannelReady?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.mB,{}),(0,r.jsx)(u._2,{children:(0,r.jsx)(f.$,{variant:"destructive",size:"sm",className:"w-full",onClick:d,children:"Close"})})]}):null]})]})};var x=a(6856),N=a(3004);let y=()=>{let{data:e,isLoading:t}=(0,l.I)({queryKey:["channels"],queryFn:i.$Q,refetchInterval:d.a,refetchOnWindowFocus:!0});return t||!e?(0,r.jsx)("div",{className:"w-full",children:Array.from({length:10}).map((e,t)=>(0,r.jsx)(c.E,{className:"w-full h-5 mt-2"},t))}):(0,r.jsxs)(o.XI,{children:[(0,r.jsx)(o.A0,{children:(0,r.jsxs)(o.Hj,{children:[(0,r.jsx)(o.nd,{children:"Channel ID"}),(0,r.jsx)(o.nd,{children:"Peer ID"}),(0,r.jsx)(o.nd,{children:"Local Balance"}),(0,r.jsx)(o.nd,{children:"State"}),(0,r.jsx)(o.nd,{children:"Time"}),(0,r.jsx)(o.nd,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(o.BF,{children:e.result.map(e=>{var t,a;let s=e.funding_udt_type_script_hash?{name:null===(t=e.udt)||void 0===t?void 0:t.name,decimal:(null===(a=e.udt)||void 0===a?void 0:a.decimal)?+e.udt.decimal:null}:{name:"CKB",decimal:p.Lc},n="".concat((0,x.c)(e.local_balance,s.decimal).toFormat()," ").concat(s.name);return(0,r.jsxs)(o.Hj,{children:[(0,r.jsx)(o.nA,{className:"max-w-8 overflow-hidden overflow-ellipsis font-mono",title:e.channel_id,children:e.channel_id}),(0,r.jsx)(o.nA,{className:"max-w-8 overflow-hidden overflow-ellipsis",title:e.peer_id,children:e.peer_id}),(0,r.jsxs)(o.nA,{className:"flex gap-1 items-center",children:[n,null===s.decimal?(0,r.jsx)(N.Y,{}):null]}),(0,r.jsx)(o.nA,{children:e.state_name}),(0,r.jsx)(o.nA,{children:new Date(e.timestamp).toLocaleString()}),(0,r.jsx)(o.nA,{className:"text-right",children:(0,r.jsx)(h,{peerId:e.peer_id,channelId:e.channel_id,state:e.state_name})})]},e.channel_id)})})]})};function j(){return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,r.jsx)(s.x2,{className:"ml-1"}),(0,r.jsx)(n.Qp,{children:(0,r.jsxs)(n.AB,{children:[(0,r.jsx)(n.J5,{className:"hidden md:block",children:(0,r.jsx)(n.tJ,{children:"Fiber"})}),(0,r.jsx)(n.tH,{className:"hidden md:block"}),(0,r.jsx)(n.J5,{children:(0,r.jsx)(n.tJ,{children:"Channels"})})]})})]}),(0,r.jsx)("main",{className:"flex flex-col gap-8 items-center p-10",children:(0,r.jsx)(y,{})})]})}},3790:(e,t,a)=>{"use strict";a.d(t,{$Q:()=>s,ay:()=>l,w0:()=>n});var r=a(5064);let s=async()=>fetch("".concat(r.C,"/channels")).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),n=async(e,t)=>fetch("".concat(r.C,"/channels/").concat(e),{method:"DELETE",body:JSON.stringify({fee_rate:t})}).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),l=async(e,t)=>fetch("".concat(r.C,"/channels"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({peer_id:e,funding_amount:"0x".concat(t.toString(16))})}).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e})},5064:(e,t,a)=>{"use strict";a.d(t,{C:()=>r,a:()=>s});let r="http://localhost:3000/api",s=1e4},3004:(e,t,a)=>{"use strict";a.d(t,{Y:()=>n});var r=a(3528),s=a(6741);let n=()=>(0,r.jsx)("span",{title:"raw value",children:(0,r.jsx)(s.A,{size:"10",color:"#FFB11B"})})},736:(e,t,a)=>{"use strict";a.d(t,{AB:()=>o,J5:()=>c,Qp:()=>d,tH:()=>u,tJ:()=>m});var r=a(3528),s=a(5316),n=a(2635),l=a(9070),i=(a(4769),a(6856));let d=s.forwardRef((e,t)=>{let{...a}=e;return(0,r.jsx)("nav",{ref:t,"aria-label":"breadcrumb",...a})});d.displayName="Breadcrumb";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("ol",{ref:t,className:(0,i.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",a),...s})});o.displayName="BreadcrumbList";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("li",{ref:t,className:(0,i.cn)("inline-flex items-center gap-1.5",a),...s})});c.displayName="BreadcrumbItem",s.forwardRef((e,t)=>{let{asChild:a,className:s,...l}=e,d=a?n.DX:"a";return(0,r.jsx)(d,{ref:t,className:(0,i.cn)("transition-colors hover:text-foreground",s),...l})}).displayName="BreadcrumbLink";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("span",{ref:t,role:"link","aria-disabled":"true","aria-current":"page",className:(0,i.cn)("font-normal text-foreground",a),...s})});m.displayName="BreadcrumbPage";let u=e=>{let{children:t,className:a,...s}=e;return(0,r.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,i.cn)("[&>svg]:w-3.5 [&>svg]:h-3.5",a),...s,children:null!=t?t:(0,r.jsx)(l.A,{})})};u.displayName="BreadcrumbSeparator"},2740:(e,t,a)=>{"use strict";a.d(t,{I:()=>u,SQ:()=>f,V0:()=>N,_2:()=>p,lp:()=>h,mB:()=>x,rI:()=>c,ty:()=>m});var r=a(3528),s=a(5316),n=a(4682),l=a(9070),i=a(6830),d=a(7698),o=a(6856);let c=n.bL,m=n.l9,u=n.YJ;n.ZL,n.Pb,n.z6,s.forwardRef((e,t)=>{let{className:a,inset:s,children:i,...d}=e;return(0,r.jsxs)(n.ZP,{ref:t,className:(0,o.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...d,children:[i,(0,r.jsx)(l.A,{className:"ml-auto"})]})}).displayName=n.ZP.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.G5,{ref:t,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}).displayName=n.G5.displayName;let f=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...l}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsx)(n.UC,{ref:t,sideOffset:s,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});f.displayName=n.UC.displayName;let p=s.forwardRef((e,t)=>{let{className:a,inset:s,...l}=e;return(0,r.jsx)(n.q7,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",s&&"pl-8",a),...l})});p.displayName=n.q7.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,checked:l,...d}=e;return(0,r.jsxs)(n.H_,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:l,...d,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})}),s]})}).displayName=n.H_.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(n.hN,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=n.hN.displayName;let h=s.forwardRef((e,t)=>{let{className:a,inset:s,...l}=e;return(0,r.jsx)(n.JU,{ref:t,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...l})});h.displayName=n.JU.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});x.displayName=n.wv.displayName;let N=e=>{let{className:t,...a}=e;return(0,r.jsx)("span",{className:(0,o.cn)("ml-auto text-xs tracking-widest opacity-60",t),...a})};N.displayName="DropdownMenuShortcut"},2457:(e,t,a)=>{"use strict";a.d(t,{A0:()=>i,BF:()=>d,Hj:()=>o,XI:()=>l,nA:()=>m,nd:()=>c,r6:()=>u});var r=a(3528),s=a(5316),n=a(6856);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...s})});i.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...s})});d.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});o.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...s})});c.displayName="TableHead";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...s})});m.displayName="TableCell";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...s})});u.displayName="TableCaption"},4187:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u,oR:()=>m});var r=a(5316);let s=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=i(o,e),d.forEach(e=>{e(o)})}function m(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=r.useState(o);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},6741:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(5420).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4769:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(5420).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[5,356,928,397,992,465,743,358],()=>t(8967)),_N_E=e.O()}]);