(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{251:(e,t,r)=>{Promise.resolve().then(r.bind(r,9317))},8250:(e,t,r)=>{"use strict";r.d(t,{Hu:()=>a,WH:()=>c,Sj:()=>d,q0:()=>n,MO:()=>h,Bx:()=>p,Sx:()=>u});let a=null!==(o=null===(s=r.g.process)||void 0===s?void 0:s.env.CHAIN_TYPE)&&void 0!==o?o:"testnet";null===(i=r.g.process)||void 0===i||i.env.FNN_ENDPOINT,null===(l=r.g.process)||void 0===l||l.env.CKB_NODE_ENDPOINT;let n="mainnet"===a?"https://explorer.nervos.org":"https://testnet.explorer.nervos.org";var s,i,l,o,c=function(e){return e.NegotiatingFunding="NEGOTIATING_FUNDING",e.CollaboratingFundingTx="COLLABORATING_FUNDING_TX",e.SigningCommitment="SIGNING_COMMITMENT",e.AwaitingTxSignatures="AWAITING_TX_SIGNATURES",e.AwaitingChannelReady="AWAITING_CHANNEL_READY",e.ChannelReady="CHANNEL_READY",e.ShuttingDown="SHUTTING_DOWN",e.Closed="CLOSED",e}({}),d=function(e){return e.Fibb="Fibb",e.Fibt="Fibt",e.Fibd="Fibd",e}({}),u=function(e){return e.Open="Open",e.Cancelled="Cancelled",e.Expired="Expired",e.Received="Received",e.Paid="Paid",e.BeingCancelled="BeingCancelled",e.Archived="Archived",e}({}),h=function(e){return e.Account="Account",e.Peer="Peer",e.Channel="Channel",e.Merchant="Merchant",e.Invoice="Order",e}({}),p=function(e){return e.New="New",e.Delete="Delete",e.Update="Update",e.Archive="Archive",e.Cancel="Cancel",e}({})},9174:(e,t,r)=>{"use strict";r.d(t,{KJ:()=>s,Nn:()=>n,Xc:()=>i,oq:()=>l});var a=r(5064);let n=async()=>fetch("".concat(a.C,"/info")).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),s=async()=>fetch("".concat(a.C,"/info/admin")).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),i=async()=>fetch("".concat(a.C,"/info/finance")).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),l=async()=>fetch("".concat(a.C,"/info/udt-info")).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e})},7298:(e,t,r)=>{"use strict";r.d(t,{CF:()=>l,Do:()=>n,gS:()=>s,mo:()=>o,rw:()=>c,wP:()=>i});var a=r(5064);let n=async e=>fetch("".concat(a.C,"/invoices?").concat(new URLSearchParams(e))).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),s=async e=>fetch("".concat(a.C,"/invoices/").concat(e)).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),i=async(e,t,r,n,s,i)=>{if(!n&&!s)throw Error("Payment Preimage or order is required");return fetch("".concat(a.C,"/invoices"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({amount:"0x".concat(e.toString(16)),description:t,currency:r,payment_preimage:n,hash_algorithm:"sha256",order:!n&&s?{merchant_id:s.merchantId,quota:s.quota,detail:s.detail}:null,udt_type_script:i})}).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return{code:e.code,result:{address:e.result.invoice_address,paymentHash:e.result.invoice.data.payment_hash},message:null}})},l=async e=>fetch("".concat(a.C,"/invoices/").concat(e),{method:"DELETE"}).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),o=async e=>fetch("".concat(a.C,"/invoices/").concat(e),{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({action:"archive"})}).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e}),c=async(e,t)=>fetch("".concat(a.C,"/invoices/").concat(e),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({endpoint:t})}).then(e=>e.json()).then(e=>{if(e.code)throw Error(e.error);return e})},5064:(e,t,r)=>{"use strict";r.d(t,{C:()=>a,a:()=>n});let a="http://localhost:3000/api",n=1e4},9317:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(3528),n=r(736),s=r(9992),i=r(5547),l=r(6067),o=r(7298),c=r(9174),d=r(8569),u=r(1805),h=r(7083),p=r(6713),f=r(4187),m=r(8250),x=r(7616),N=r(2920),y=r(8699),j=r(7028);function v(){var e;let t=(0,l.useSearchParams)().get("payment_hash"),{data:r}=(0,i.I)({queryKey:["invoice",t],queryFn:()=>t?(0,o.gS)(t):void 0,enabled:!!t,refetchOnWindowFocus:!0}),{data:v}=(0,i.I)({queryKey:["udt-info"],queryFn:c.oq,refetchOnWindowFocus:!0});if(!r)return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,a.jsx)(s.x2,{className:"ml-1"}),(0,a.jsx)(n.Qp,{children:(0,a.jsxs)(n.AB,{children:[(0,a.jsx)(n.J5,{className:"hidden md:block",children:(0,a.jsx)(n.tJ,{children:"Tools"})}),(0,a.jsx)(n.tH,{className:"hidden md:block"}),(0,a.jsx)(n.J5,{children:(0,a.jsx)(n.tJ,{children:"Fast Pay"})})]})})]}),(0,a.jsx)("main",{className:"flex flex-col gap-8 items-center p-10",children:"Loading"})]});let b=r.result.udt_type_script_hash,g=b?null==v?void 0:null===(e=v.result.find(e=>e.script_hash===b))||void 0===e?void 0:e.name:"CKB",w="".concat(r.result.amount," ").concat(g),C=r.result.description,T=async e=>{var r;e.stopPropagation(),e.preventDefault();let n=null===(r=e.currentTarget.rpc)||void 0===r?void 0:r.value;if(t&&n){if(!window.confirm("Confirm to pay ".concat(w," for payment hash ").concat(t))){(0,f.oR)({description:"Payment cancelled"});return}try{let e=await (0,o.rw)(t,n);(0,f.oR)({title:"Payment sent",description:(0,a.jsx)("pre",{className:"mt-2 rounded-md bg-slate-950 p-4 text-wrap break-all",children:(0,a.jsx)("code",{className:"text-white",children:JSON.stringify(e.result)})})})}catch(e){e instanceof Error&&(0,f.oR)({title:"Payment failed",description:(0,a.jsx)("pre",{className:"mt-2 rounded-md bg-slate-950 p-4 text-wrap break-all",children:(0,a.jsx)("code",{className:"text-white",children:e.message})})})}}},A=r.result.status,S=r.result.order;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,a.jsx)(s.x2,{className:"ml-1"}),(0,a.jsx)(n.Qp,{children:(0,a.jsxs)(n.AB,{children:[(0,a.jsx)(n.J5,{className:"hidden md:block",children:(0,a.jsx)(n.tJ,{children:"Tools"})}),(0,a.jsx)(n.tH,{className:"hidden md:block"}),(0,a.jsx)(n.J5,{children:(0,a.jsx)(n.tJ,{children:"Fast Pay"})})]})})]}),(0,a.jsx)("main",{className:"flex flex-col gap-8 items-center p-10",children:(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{className:"font-bold text-2xl",children:"Fast Pay"}),(0,a.jsx)(d.BT,{children:C})]}),(0,a.jsx)(d.Wu,{children:(0,a.jsxs)("form",{className:"flex flex-col gap-2",onSubmit:T,children:[(0,a.jsxs)("div",{className:"w-[340px] break-all",children:[(0,a.jsx)("span",{children:"Pay"}),(0,a.jsx)("b",{className:"px-1",children:w}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{children:"For Payment Hash"}),(0,a.jsx)("b",{className:"px-1",children:t})]}),(0,a.jsx)(N.w,{}),S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(p.Nt,{children:[(0,a.jsxs)(p.R6,{className:"flex items-center justify-between w-full",children:[(0,a.jsx)("h5",{className:"font-bold",children:"Order Detail"}),(0,a.jsx)(h.$,{variant:"ghost",size:"sm",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(x.Ke,{children:(0,a.jsx)("pre",{className:"w-[340px] mt-2 rounded-md p-4 text-wrap bg-slate-950 break-all overflow-auto text-xs",children:(0,a.jsx)("code",{className:"text-white",children:JSON.stringify(S,null,2)})})})]}),(0,a.jsx)(N.w,{})]}):null,(0,a.jsx)("b",{className:"mt-2 ml-auto",children:"Order Status: ".concat(A)}),A===m.Sx.Open?(0,a.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,a.jsx)(y.J,{htmlFor:"rpc",className:"font-bold",children:"RPC Endpoint"}),(0,a.jsx)(u.p,{placeholder:"RPC of payer node",id:"rpc",defaultValue:"http://127.0.0.1:8227"}),(0,a.jsx)(h.$,{type:"submit",children:"Pay"})]}):null]})})]})})]})}},736:(e,t,r)=>{"use strict";r.d(t,{AB:()=>c,J5:()=>d,Qp:()=>o,tH:()=>h,tJ:()=>u});var a=r(3528),n=r(5316),s=r(2635),i=r(9070),l=(r(4769),r(6856));let o=n.forwardRef((e,t)=>{let{...r}=e;return(0,a.jsx)("nav",{ref:t,"aria-label":"breadcrumb",...r})});o.displayName="Breadcrumb";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("ol",{ref:t,className:(0,l.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",r),...n})});c.displayName="BreadcrumbList";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("li",{ref:t,className:(0,l.cn)("inline-flex items-center gap-1.5",r),...n})});d.displayName="BreadcrumbItem",n.forwardRef((e,t)=>{let{asChild:r,className:n,...i}=e,o=r?s.DX:"a";return(0,a.jsx)(o,{ref:t,className:(0,l.cn)("transition-colors hover:text-foreground",n),...i})}).displayName="BreadcrumbLink";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("span",{ref:t,role:"link","aria-disabled":"true","aria-current":"page",className:(0,l.cn)("font-normal text-foreground",r),...n})});u.displayName="BreadcrumbPage";let h=e=>{let{children:t,className:r,...n}=e;return(0,a.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,l.cn)("[&>svg]:w-3.5 [&>svg]:h-3.5",r),...n,children:null!=t?t:(0,a.jsx)(i.A,{})})};h.displayName="BreadcrumbSeparator"},8569:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>l});var a=r(3528),n=r(5316),s=r(6856);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("font-semibold leading-none tracking-tight",r),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},6713:(e,t,r)=>{"use strict";r.d(t,{Ke:()=>i,Nt:()=>n,R6:()=>s});var a=r(7616);let n=a.bL,s=a.R6,i=a.Ke},8699:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var a=r(3528),n=r(5316),s=r(8183),i=r(8836),l=r(6856);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.b,{ref:t,className:(0,l.cn)(o(),r),...n})});c.displayName=s.b.displayName},4187:(e,t,r)=>{"use strict";r.d(t,{dj:()=>h,oR:()=>u});var a=r(5316);let n=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function h(){let[e,t]=a.useState(c);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},7028:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(5420).A)("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]])},4769:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(5420).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},7616:(e,t,r)=>{"use strict";r.d(t,{Ke:()=>g,R6:()=>v,bL:()=>T});var a=r(5316),n=r(1935),s=r(9392),i=r(9617),l=r(1523),o=r(1433),c=r(5543),d=r(9929),u=r(333),h=r(3528),p="Collapsible",[f,m]=(0,s.A)(p),[x,N]=f(p),y=a.forwardRef((e,t)=>{let{__scopeCollapsible:r,open:n,defaultOpen:s,disabled:l,onOpenChange:o,...d}=e,[p=!1,f]=(0,i.i)({prop:n,defaultProp:s,onChange:o});return(0,h.jsx)(x,{scope:r,disabled:l,contentId:(0,u.B)(),open:p,onOpenToggle:a.useCallback(()=>f(e=>!e),[f]),children:(0,h.jsx)(c.sG.div,{"data-state":C(p),"data-disabled":l?"":void 0,...d,ref:t})})});y.displayName=p;var j="CollapsibleTrigger",v=a.forwardRef((e,t)=>{let{__scopeCollapsible:r,...a}=e,s=N(j,r);return(0,h.jsx)(c.sG.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":C(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...a,ref:t,onClick:(0,n.m)(e.onClick,s.onOpenToggle)})});v.displayName=j;var b="CollapsibleContent",g=a.forwardRef((e,t)=>{let{forceMount:r,...a}=e,n=N(b,e.__scopeCollapsible);return(0,h.jsx)(d.C,{present:r||n.open,children:e=>{let{present:r}=e;return(0,h.jsx)(w,{...a,ref:t,present:r})}})});g.displayName=b;var w=a.forwardRef((e,t)=>{let{__scopeCollapsible:r,present:n,children:s,...i}=e,d=N(b,r),[u,p]=a.useState(n),f=a.useRef(null),m=(0,o.s)(t,f),x=a.useRef(0),y=x.current,j=a.useRef(0),v=j.current,g=d.open||u,w=a.useRef(g),T=a.useRef();return a.useEffect(()=>{let e=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,l.N)(()=>{let e=f.current;if(e){T.current=T.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();x.current=t.height,j.current=t.width,w.current||(e.style.transitionDuration=T.current.transitionDuration,e.style.animationName=T.current.animationName),p(n)}},[d.open,n]),(0,h.jsx)(c.sG.div,{"data-state":C(d.open),"data-disabled":d.disabled?"":void 0,id:d.contentId,hidden:!g,...i,ref:m,style:{"--radix-collapsible-content-height":y?"".concat(y,"px"):void 0,"--radix-collapsible-content-width":v?"".concat(v,"px"):void 0,...e.style},children:g&&s})});function C(e){return e?"open":"closed"}var T=y},8183:(e,t,r)=>{"use strict";r.d(t,{b:()=>l});var a=r(5316),n=r(5543),s=r(3528),i=a.forwardRef((e,t)=>(0,s.jsx)(n.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=i}},e=>{var t=t=>e(e.s=t);e.O(0,[878,356,928,992,465,743,358],()=>t(251)),_N_E=e.O()}]);